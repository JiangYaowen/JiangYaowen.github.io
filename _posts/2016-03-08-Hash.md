---
layout: post
title: 哈希表
date: 2016-03-11
categories: blog
tags: [数据结构]
description: Hash的相关知识总结

---

## 哈希表知识汇总

1、什么叫哈希表？

* 在记录的存储位置和它的关键字之间建立一个确定的对应关系f，使每个关键字和结构中一个唯一的存储位置相对应。因而在查找时，只要根据这个对应关系f找到给定值K的像f（K）。若结构中存在关键字和K相等的记录，则必定在f（K）的存储位置上，由此不需要进行比较便可直接取得所查记录。在此，我们称这个对应关系f为**哈希（Hash）函数**，按这个思想建立的表为**哈希表**。
* 为什么我们要设计出哈希表这种存储方式呢？
因为这种存储方式查询速度相当快。对于线性表、树等结构，查询记录时需要进行一系列和关键字的比较，这一类查询方法建立在“比较”的基础上，查找的效率依赖于查找过程中所进行的比较次数。

2、哈希函数的构造方法有哪些？

* 直接定址法
* 数字分析法
* 平方取中法
* 折叠法
* 除留余数法
* 随机数法



3、处理冲突的方法？

一般情况下，哈希函数是一个压缩映像，也就是，散列值的空间小于输入的空间，对不同的关键字可能得到同一哈希地址，这便产生了冲突，我们只能通过选择合适的哈希函数减少冲突，而不能避免冲突，因而，如何处理冲突时哈希函数造表不可缺少的另一面。

* 开放定址法
* 再哈希法
* 链地址法
* 建立公共溢出区  

4、闭散列方法有哪些？

冲突解决技术可以分为两类：开散列方法( open hashing，也称为拉链法，separate chaining )和闭散列方法( closed hashing，也称为开地址方法，open addressing )。这两种方法的不同之处在于：开散列法把发生冲突的关键码存储在散列表主表之外，而闭散列法把发生冲突的关键码存储在表中另一个槽内。

5、哈希表（等概率情况下）查找成功与查找不成功的平均查找长度

首先，要明白的是平均查找长度求的是期望，那么就按照求期望的方法来求平均查找长度吧。

题目：

在地址空间为0~16的散列区中，对以下关键字序列构造两个哈希表：

{Jan, Feb, Mar, Apr, May,  June, July, Aug, Sep, Oct, Nov, Dec}

（1） 用线性探测开放地址法处理冲突；

（2） 用链地址法（开散列存储）处理冲突 

并分别求这两个哈希表在等概率情况下查找成功和查找不成功时的平均查找长度。设哈希函数为 
H(key) = i/2,其中i为关键字中第一个字母在字母表中的序号,如下：

A B C D E F G H I  J  K  L M  N   O  P Q   R  S  T   U   V   W  X  Y   Z

1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  21  22  23  24 25 26

  解决如下：

(1) 线性探测进入散列区的次序如下，X 代表冲突，要找下一个空格

Jan -> 5

Feb -> 3

Mar -> 6

Apr -> 0

May -> 6X -> 7

June -> 5X -> 6X -> 7X -> 8

July -> 5X -> 6X -> 7X -> 8X -> 9

Aug -> 0X -> 1

Sep -> 9X -> 10

Oct -> 7X -> 8X -> 9X -> 10X -> 11

Nov -> 7X -> 8X -> 9X -> 10X -> 11X -> 12

Dec -> 2

很明显，查找成功时，查找Jan、Feb、Mar等仅需要一次，其余的也可以由上面看出来所以查找成功时平均查找长度 

(ASL) = (1 + 1 + 1 + 1 + 2 + 4 + 5 + 2 + 2 + 5 + 6 + 1) / 12 = 31/12 = 2.58 

为什么是除以12呢？因为查找成功的情况总共有12种啊查找不成功时呢？什么是查找不成功呢？查找不成功就是从查找位置开始直到一个位置为空需要比较的次数。首先，26/2=13，也就是说查找不成功的情况也只能出现在0~13之间，只有这14种情况。举个例子来说，查找Aay吧，根据hash表，与Apr比较不匹配，接着与Aug比较又是不匹配，接着与Dec比较又是不匹配，又与Feb比较又是不匹配，到了4位置的时候为空了，即4上内容与nullkey比较，结果为空，所以查找Aay失败，查找长度为5。同理也能计算其他的。

最终平均查找失败时平均查找长度为（5+4+3+2+1+9+8+7+6+5+4+3+2+1）/14=60/14。注意啊，这里是除以14啊。（这是求期望的方法啊）

(2) 链地址法

0 之下有 Apr, Aug

2 之下有 Dec

3 之下有 Feb

5 之下有 Jan, June, July

6 之下有 Mar, May

7 之下有 Oct, Nov

9 之下有 Sep

查找成功时候，查 Apr, Dec, Feb, Jan, Mar, Oct, Sep 各需 1 次，查 Aug, June, May, Nov 各需 2 次，查 July 需 3 次。

所以查找成功时平均查找长度 (ASL) = (1 * 7 + 2 * 4 + 3 * 1) / 12 = 18/12 = 1.5

查找失败时平均查找长度：举个例子吧，查找Boy,2/2=1，而1的地方的指针为空，就不用比较就可以知道不存在，查找产度为0。查找Aay，与Apr比较不匹配，与Aug比较不匹配，同时，Aug指向下一个节点的指针为空，就可以知道查找失败，查找长度为2。

 所以查找失败的平均查找长度：（2+1+1+3+2+2+1）/14=12/14。